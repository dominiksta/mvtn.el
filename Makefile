.SUFFIXES = .elc .el

EMACS = emacs
elc = mvtn.elc mvtn-test.elc

# ----------------------------------------------------------------------
# clean
# ----------------------------------------------------------------------
clean:
	rm *.elc

# ----------------------------------------------------------------------
# compilation
# ----------------------------------------------------------------------
.el.elc:
	$(EMACS) -batch -Q -L . -f batch-byte-compile $<

# ----------------------------------------------------------------------
# dependencies
# ----------------------------------------------------------------------
mvtn-test.elc: mvtn.el mvtn-test.el

# ----------------------------------------------------------------------
# unit tests
# ----------------------------------------------------------------------
test: $(elc)
	$(EMACS) -batch -Q -L . -l mvtn-test.elc -f ert-run-tests-batch